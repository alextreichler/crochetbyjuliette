<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order Status - Crochet by Juliette</title>
    <link rel="icon" type="image/svg+xml" href="/static/img/logo.svg">
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>

<header>
    <div class="header-content">
        <img src="/static/img/logo.svg" alt="Cute Mouse Logo" class="header-logo">
        <h1 class="header-title">Crochet by Juliette</h1>
        <p class="header-subtitle">Handmade with love, just for you.</p>
    </div>
    <div class="header-actions">
        <a href="/" class="header-login-btn">Home</a>
        <a href="/status-request" class="header-login-btn active">Order Status</a>
        <a href="/login" class="header-login-btn">Admin Login</a>
    </div>
</header>

<div class="order-container">
    <div id="toast-target" style="display:none;">
        {{with .Flashes}}
            {{range .}}
            <div class="flash-message flash-{{.Type}}">{{.Message}}</div>
            {{end}}
        {{end}}
    </div>
    <div class="status-header">
        <h1 style="color: #e91e63; margin: 0;">Order Status</h1>
        <p style="color: #333; font-size: 1.1rem; font-weight: bold; margin: 0.5rem 0;">Order Ref: {{.Order.OrderRef}}</p>
        <p style="color: #666; margin: 0;">Ordered on {{.Order.CreatedAt.Format "Jan 02, 2006"}}</p>
    </div>

    <!-- Simple Progress Visualizer -->
    <div style="text-align: center; margin-bottom: 2rem;">
        <h2 style="background: #e91e63; color: white; display: inline-block; padding: 0.5rem 1.5rem; border-radius: 50px;">
            {{.Order.Status}}
        </h2>
        {{if eq .Order.Status "Shipped"}}
            <p>Your item is on its way!</p>
        {{else if eq .Order.Status "Delivered"}}
            <p>Enjoy your handmade item!</p>
        {{else if eq .Order.Status "Cancelled"}}
            <p>This order has been cancelled.</p>
        {{else}}
            <p>We are working on your order.</p>
        {{end}}
    </div>

    {{if .Order.AdminComments}}
    <div style="background: #fff9c4; border-left: 4px solid #fbc02d; padding: 1rem; margin-bottom: 2rem; border-radius: 4px;">
        <h4 style="margin: 0 0 0.5rem 0; color: #f57f17;">Note from Juliette:</h4>
        <p style="margin: 0; color: #333; white-space: pre-wrap;">{{.Order.AdminComments}}</p>
    </div>
    {{end}}

    <div class="item-details">
        <img src="{{.Order.ItemImageURL}}" alt="{{.Order.ItemTitle}}">
        <div>
            <h3 style="margin: 0 0 0.5rem 0;">{{.Order.ItemTitle}}</h3>
            <p style="margin: 0;"><strong>Qty:</strong> {{.Order.Quantity}}</p>
            <p style="margin: 0;"><strong>Customer:</strong> {{.Order.CustomerName}}</p>
            
            <p style="margin: 0;"><strong>Delivery:</strong> 
                {{if eq .Order.DeliveryMethod "shipping"}}Shipping{{else}}Hand Delivered{{end}}
            </p>
            
            {{if eq .Order.DeliveryMethod "shipping"}}
            <p style="margin: 0;"><strong>Address:</strong> {{.Order.CustomerAddress}}</p>
            {{end}}

            <p style="margin: 0;"><strong>Payment:</strong> Pay in Person</p>
            <p style="margin: 0;"><strong>Notes:</strong> {{.Order.Notes}}</p>
        </div>
    </div>

    {{if eq .Order.Status "Ordered"}}
    <div style="text-align: center; margin-top: 1.5rem; display: flex; justify-content: center; gap: 1rem;">
        <a href="/order/edit/{{.Order.MagicToken}}" class="submit-btn" style="text-decoration: none; display: inline-block; width: auto; padding: 0.5rem 1rem; font-size: 0.9rem;">Edit Details</a>
        
        <form method="POST" action="/order/cancel" onsubmit="return confirm('Are you sure you want to cancel this order?');" style="display: inline;">
            {{.CsrfField}}
            <input type="hidden" name="token" value="{{.Order.MagicToken}}">
            <button type="submit" class="submit-btn" style="background-color: #999; width: auto; padding: 0.5rem 1rem; font-size: 0.9rem;">Cancel Order</button>
        </form>
    </div>
    {{end}}

    <div style="text-align: center; margin-top: 2rem;">
        <a href="/" class="cancel-link">&larr; Back to Shop</a>
    </div>
</div>

<footer>
    <div style="margin-bottom: 1.5rem;">
        <h4 style="margin: 0 0 0.5rem 0; color: #e91e63;">Contact Us</h4>
        <p style="margin: 0; font-size: 0.9rem; color: #666;">
            Questions? Custom Request?<br>
            Email us at: <a href="mailto:juliette@example.com" style="color: #333; font-weight: bold;">juliette@example.com</a>
        </p>
    </div>
    <p>&copy; 2025 Crochet by Juliette</p>
    <p><a href="/status-request" style="color: #999; text-decoration: none; font-size: 0.9rem;">Check Order Status</a></p>
</footer>

</body>
</html>
